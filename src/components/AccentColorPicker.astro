<div
  class="has-[:focus-visible]:outline-dashed has-[:focus-visible]:outline-2 has-[:focus-visible]:outline-offset-2 size-11 flex items-center justify-center relative z-0 rounded-full text-white bg-white/10 overflow-hidden"
>
  <input
    type="color"
    id="accent"
    name="accent"
    value="#990066"
    aria-label="Choose accent color"
    class="rounded-full size-11 cursor-pointer absolute left-0 top-0 scale-150"
  />
  <label for="accent" class="sr-only" tabindex="-1">Accent color</label>
</div>

<script>
  // Update --color-primary when the color picker changes
  (function () {
    const input = document.getElementById("accent") as HTMLInputElement | null;
    if (!input) return;
    const root = document.documentElement;

    function apply(val: string) {
      if (!val) return;
      root.style.setProperty("--color-primary", val);
      // Ensure accent theme class is applied so accent:* variants activate
      if (!root.classList.contains("accent")) {
        root.classList.add("accent");
      }
    }

    input.addEventListener("input", () => apply(input.value));
    input.addEventListener("change", () => apply(input.value));
  })();
</script>
