---
import "../styles/global.css";
import Hero from "../components/Hero.astro";
import Meta from "../components/Meta.astro";
import ScriptGA from "../components/ScriptGA.astro";
import Footer from "../components/Footer.astro";
---

<!doctype html>
<html lang="en">
  <head prefix="og: http://ogp.me/ns#">
    <Meta />
  </head>
  <!-- TODO: check itemptype for other pages -->
  <body itemscope itemtype="http://schema.org/WebPage">
    <div id="smooth-content">
      <noscript>
        <div style="color: #8B7D4A; background-color: #FAFBF8; padding: 10px;">
          ⚠️ <strong>Warning!</strong> For a better experience, enable JavaScript
          in your browser.
        </div>
      </noscript>
      <!--[if lt IE 11]>
            <div style="color: #8B7D4A; background-color: #FAFBF8; padding: 10px;">
              ⚠️ <strong>Warning!</strong> You are using an <strong style="text-decoration: underline;  text-underline-offset: 2px; text-decoration-thickness: 2px;">outdated</strong> browser. Please <strong><a href="https://browsehappy.com/">upgrade your browser</a></strong> to improve your experience.
            </div>
        <![endif]-->
      <ScriptGA />

      <Hero />
      <main>
        <slot />
      </main>
      <Footer />
    </div>

    <script>
      // https://gsap.com/docs/v3/Plugins/ScrollSmoother/
      import { gsap } from "gsap";
      import { ScrollTrigger } from "gsap/ScrollTrigger";
      import { ScrollSmoother } from "gsap/ScrollSmoother";
      // import { DrawSVGPlugin } from "gsap/DrawSVGPlugin";

      // Register plugins globally
      gsap.registerPlugin(ScrollTrigger, ScrollSmoother);
      // DrawSVGPlugin

      // Make GSAP available globally
      (window as any).gsap = gsap;
      (window as any).ScrollTrigger = ScrollTrigger;
      (window as any).ScrollSmoother = ScrollSmoother;

      // Initialize ScrollSmoother
      const smoother = ScrollSmoother.create({
        content: "#smooth-content",
        smooth: 2,
        // normalizeScroll: true, // NOTE: causes 'pull to refresh' to not work on mobile
        ignoreMobileResize: true,
        effects: true,
      });

      // Dispatch ready event for components
      document.dispatchEvent(new CustomEvent('gsap:ready'));

      // TODO
      //draws all elements with the "draw-me" class applied 
      // gsap.from("#ampersand", {duration:1,drawSVG: 0});
    </script>
  </body>
</html>
