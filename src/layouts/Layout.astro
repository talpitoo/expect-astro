---
import "../styles/global.css";
import Hero from "../components/Hero.astro";
import Meta from "../components/Meta.astro";
import ScriptGA from "../components/ScriptGA.astro";
import Footer from "../components/Footer.astro";
---

<!doctype html>
<html lang="en">
  <head prefix="og: http://ogp.me/ns#">
    <Meta />
  </head>
  <!-- TODO: check itemptype for other pages -->
  <body itemscope itemtype="http://schema.org/WebPage">
    <div id="smooth-content">
      <noscript>
        <div style="color: #8B7D4A; background-color: #FAFBF8; padding: 10px;">
          ⚠️ <strong>Warning!</strong> For a better experience, enable JavaScript
          in your browser.
        </div>
      </noscript>
      <!--[if lt IE 11]>
            <div style="color: #8B7D4A; background-color: #FAFBF8; padding: 10px;">
              ⚠️ <strong>Warning!</strong> You are using an <strong style="text-decoration: underline;  text-underline-offset: 2px; text-decoration-thickness: 2px;">outdated</strong> browser. Please <strong><a href="https://browsehappy.com/">upgrade your browser</a></strong> to improve your experience.
            </div>
        <![endif]-->
      <ScriptGA />

      <Hero />
      <main>
        <slot />
      </main>
      <Footer />
    </div>

    <script>
      import { gsap } from "gsap";
      import { ScrollTrigger } from "gsap/ScrollTrigger";
      import { ScrollSmoother } from "gsap/ScrollSmoother";

      gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

      const smoother = ScrollSmoother.create({
        // wrapper: "#smooth-wrapper",
        content: "#smooth-content",
        smooth: 2,
        normalizeScroll: true, // prevents address bar from showing/hiding on most devices, solves various other browser inconsistencies
        ignoreMobileResize: true, // skips ScrollTrigger.refresh() on mobile resizes from address bar showing/hiding
        effects: true,
      });

      gsap.set(".cursor-follower", { xPercent: -50, yPercent: -50 });

      let xTo = gsap.quickTo(".cursor-follower", "x", { duration: 0.6, ease: "power3" }),
        yTo = gsap.quickTo(".cursor-follower", "y", { duration: 0.6, ease: "power3" });

      window.addEventListener("mousemove", (e) => {
        xTo(e.clientX);
        yTo(e.clientY);
      });
    </script>
  </body>
</html>
